apply plugin: "org.jetbrains.dokka"

dokka {
    dokkaPublications.named("html") {
        outputDirectory.set(project.layout.buildDirectory.dir("javadoc"))
    }

    dokkaSourceSets.configureEach {
        skipDeprecated.set(false)
        reportUndocumented.set(true)
        skipEmptyPackages.set(true)

        sourceLink {
            localDirectory.set(file("src/main/kotlin"))
            remoteUrl.set(uri("https://github.com/infinum/android-sentinel/"))
            remoteLineSuffix.set("#L")
        }

        jdkVersion.set(17)

        perPackageOption {
            matchingRegex.set("com\\.infinum\\.sentinel\\.extensions.*")
            suppress.set(true)
        }
        perPackageOption {
            matchingRegex.set("com\\.infinum\\.sentinel\\.ui\\.shared\\.edgetreatment.*")
            suppress.set(true)
        }
        perPackageOption {
            matchingRegex.set("com\\.infinum\\.sentinel\\.ui\\.shared.*")
            suppress.set(true)
        }
        perPackageOption {
            matchingRegex.set("com\\.infinum\\.sentinel\\.sample.*")
            suppress.set(true)
        }
    }
}